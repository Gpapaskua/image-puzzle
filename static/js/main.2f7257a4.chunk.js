(this["webpackJsonpimage-puzzle"]=this["webpackJsonpimage-puzzle"]||[]).push([[0],{51:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var c=n(5),a=n.n(c),r=n(33),l=n.n(r),s=(n(51),n(9)),o=n(0),i=n.n(o),u=n(3),m=n(12),j=n(27),d=n.n(j),b=n(28),f=n.n(b),p=n(17),x=n(19),g=n(45);Object(g.a)({apiKey:"AIzaSyBsYKl7Qc3AfN7vDGX1Po3zucHj5Zo2Eu4",authDomain:"image-puzzle-2757b.firebaseapp.com",projectId:"image-puzzle-2757b",storageBucket:"image-puzzle-2757b.appspot.com",messagingSenderId:"130798020012",appId:"1:130798020012:web:0f71705ed9753bf25a4609"});var O=Object(x.e)(),h=function(){var e=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(x.a)(Object(x.b)(O,"users"),{nickname:t});case 3:return n=e.sent,e.abrupt("return",n.id);case 7:e.prev=7,e.t0=e.catch(0),console.error("Error adding document: ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(u.a)(i.a.mark((function e(t,n,c,a){var r,l,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=Object(x.c)(O,"users",t),e.next=4,Object(x.d)(r);case 4:return l=e.sent,s=l.data().results?[].concat(Object(p.a)(l.data().results),[{level:n,time:c,image:a}]):[{level:n,time:c,image:a}],e.next=8,Object(x.f)(r,{results:Object(p.a)(s)});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Error adding document: ",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,c,a){return e.apply(this,arguments)}}(),z=function(){var e=Object(u.a)(i.a.mark((function e(t){var n,c,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=Object(x.c)(O,"users",t),e.next=4,Object(x.d)(c);case 4:return a=e.sent,e.abrupt("return",null===(n=a.data())||void 0===n?void 0:n.results);case 8:e.prev=8,e.t0=e.catch(0),console.error("Error adding document: ",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();function I(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),c=e[t];e[t]=e[n],e[n]=c}return e}var S=function(e,t,n){return 0!==n&&n%parseInt(t)!==0?e*(n%parseInt(t)):0},w=function(e,t,n){return n<3?0:Math.floor(n/parseInt(t))*e},k=function(e){for(var t=[],n=0;n<Math.pow(parseInt(e),2);n++)t.push({correctPosition:n});return I(t)};function N(e,t,n){var c=new Image;c.onload=t,c.onerror=n,c.src=e}var C=[{value:"3x3",text:"3X3"},{value:"4x4",text:"4X4"},{value:"6x6",text:"6X6"},{value:"8x8",text:"8X8"},{value:"12x12",text:"12X12"},{value:"16x16",text:"16X16"},{value:"20x20",text:"20X20"}],y=function(){localStorage.removeItem("puzzleLevel"),localStorage.removeItem("puzzlePlayTime"),localStorage.removeItem("puzzle"),localStorage.removeItem("puzzleImage")},T=n(35),P=n(46),B=n(6),L=function(e){var t=e.onClickHandler,n=e.text,c=Object(P.a)(e,["onClickHandler","text"]);return Object(B.jsx)("button",Object(T.a)(Object(T.a)({onClick:t},c),{},{children:n}))},E=f()(d.a),F=function(){var e=Object(c.useState)(""),t=Object(m.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(!1),l=Object(m.a)(r,2),o=l[0],j=l[1],d=Object(c.useState)(null),b=Object(m.a)(d,2),f=b[0],p=b[1],x=Object(c.useState)(localStorage.getItem("nickname")||""),g=Object(m.a)(x,2),O=g[0],v=g[1],z=Object(c.useState)(""),I=Object(m.a)(z,2),S=I[0],w=I[1],k=Object(s.f)(),T=function(){var e=Object(u.a)(i.a.mark((function e(t){var c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""===O){e.next=10;break}if(j(!0),localStorage.getItem("userId")&&O===localStorage.getItem("nickname")){e.next=9;break}return e.next=6,h(O);case 6:c=e.sent,localStorage.setItem("nickname",O),localStorage.setItem("userId",c);case 9:j(!1);case 10:""!==S&&N(S,(function(){localStorage.setItem("puzzleImage",S),k("/".concat(n))}),(function(){return p("Oops Image isn't valid!")})),localStorage.getItem("puzzleImage")||""!==S||k("/".concat(n));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=Object(c.useCallback)((function(){k("/".concat(localStorage.getItem("puzzleLevel"),"x").concat(localStorage.getItem("puzzleLevel"))),E.close()}),[k]),F=function(){y(),E.close()};return Object(c.useEffect)((function(){return localStorage.getItem("puzzleLevel")&&setTimeout((function(){return E.fire({title:"<strong>Welcome Back!</strong>",icon:"question",html:Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)("p",{children:"Do you wish to continue to your previous game?"}),Object(B.jsx)(L,{text:"Continue",className:"start-button mx-2",onClickHandler:P}),Object(B.jsx)(L,{text:"Start New",className:"start-button mx-2",onClickHandler:F})]}),showCloseButton:!1,showCancelButton:!1,focusConfirm:!1,showConfirmButton:!1})}),800),function(){p(null)}}),[P]),Object(B.jsx)("div",{className:"container-fluid min-vh-100 d-flex flex-column justify-content-center home",children:Object(B.jsx)("div",{className:"w-50 mx-auto",children:Object(B.jsxs)("div",{className:"d-flex flex-column align-items-center text-white puzzle-intro py-5",children:[Object(B.jsx)("p",{className:"display-5 text-light text-center pb-3 puzzle-title",children:"Image Puzzle"}),Object(B.jsx)("form",{onSubmit:T,className:"w-50",children:Object(B.jsxs)("div",{className:"d-flex flex-column align-items-center",children:[Object(B.jsxs)("div",{className:"w-100",children:[Object(B.jsx)("label",{htmlFor:"nickname",children:"Pick nickname"}),Object(B.jsx)("input",{type:"text",className:"form-control mb-3",value:O,id:"nickname",placeholder:"Very creative nickname",onChange:function(e){return v(e.target.value)}}),Object(B.jsx)("label",{htmlFor:"customImage",children:"Insert image URL"}),Object(B.jsx)("input",{type:"search",className:"form-control mb-3",value:S,id:"customImage",placeholder:"example.com/image.png",onChange:function(e){return w(e.target.value)}}),f&&Object(B.jsx)("p",{className:"text-dark fw-bold",children:f}),Object(B.jsx)("label",{htmlFor:"level",children:"Choose Level"}),Object(B.jsxs)("select",{className:"form-control mb-3",value:n,id:"level",required:!0,onChange:function(e){return a(e.target.value)},children:[Object(B.jsx)("option",{value:""}),C.map((function(e){return Object(B.jsx)("option",{value:e.value,children:e.text},e.value)}))]})]}),Object(B.jsx)(L,{text:"Start Game",className:"start-button mt-5 ".concat(o?"disabled":""),disabled:o})]})})]})})})},H=n.p+"static/media/house.1b8ad546.png",X=function(e){var t=e.part,n=e.updateBoxesOrder,c=e.pieceToShuffle,a=e.setPieceToShuffle,r=e.width,l=e.height,s=e.index,o=e.level,i={width:"".concat(r,"px"),height:"".concat(l,"px"),objectFit:"cover",backgroundImage:localStorage.getItem("puzzleImage")?"url(".concat(localStorage.getItem("puzzleImage"),")"):"url(".concat(H,")"),backgroundSize:"700px 600px",backgroundPosition:"-".concat(S(r,o,s),"px -").concat(w(l,o,s),"px"),float:"left",borderRadius:"4px"};return Object(B.jsx)("div",{className:"puzzle-piece piece-".concat(s),style:i,onClick:function(e){e.target.classList.toggle("focused"),c?(n(t),a(null)):a(t)}})},G=function(e){var t=e.playTime,n=e.setPlayTime,a=Object(c.useCallback)((function(){n((function(e){return e+1})),localStorage.setItem("puzzlePlayTime",t)}),[t,n]);return Object(c.useEffect)((function(){var e=setTimeout((function(){a()}),1e3);return function(){return clearTimeout(e)}}),[a]),Object(B.jsx)("span",{className:"d-flex align-items-center bg-secondary px-3 text-white rounded",children:t})},D=Object(c.memo)(G),M=function(e){var t=e.result;return Object(B.jsxs)("div",{className:"row justify-content-center pt-3",children:[Object(B.jsx)("div",{className:"col-lg-3 d-flex justify-content-center align-items-center",children:Object(B.jsx)("span",{children:t.level})}),Object(B.jsx)("div",{className:"col-lg-3 d-flex justify-content-center align-items-center",children:Object(B.jsx)("span",{children:t.time})}),Object(B.jsx)("div",{className:"col-lg-3",children:Object(B.jsx)("img",{src:t.image,className:"result-image",alt:"puzzle"})})]})},J=function(e){var t=e.time,n=e.results,c=e.finishGame,a=e.restartGame;return Object(B.jsxs)("div",{className:"overflow-hidden",children:[Object(B.jsxs)("p",{children:["Total Time ",t," seconds."]}),Object(B.jsx)("p",{className:"text-info",children:"Your Results"}),Object(B.jsxs)("div",{className:"row justify-content-center pb-2",children:[Object(B.jsx)("div",{className:"col-lg-3",children:"Level"}),Object(B.jsx)("div",{className:"col-lg-3",children:"Time"}),Object(B.jsx)("div",{className:"col-lg-3",children:"Image"}),n&&n.map((function(e,t){return Object(B.jsx)(M,{result:e},t)}))]}),Object(B.jsx)(L,{text:"Home",className:"start-button",onClickHandler:c}),Object(B.jsx)(L,{text:"Try again",className:"start-button mx-3",onClickHandler:a})]})},R=n.p+"static/media/user.274d479b.jpg",q=f()(d.a),A=function(){var e=Object(s.f)(),t=Object(s.g)().lvl.split("x")[0],n=Object(c.useState)(null),a=Object(m.a)(n,2),r=a[0],l=a[1],o=Object(c.useState)(!1),j=Object(m.a)(o,2),d=j[0],b=j[1],f=Object(c.useState)(parseInt(localStorage.getItem("puzzlePlayTime"))||1),p=Object(m.a)(f,2),x=p[0],g=p[1],O=Object(c.useState)(JSON.parse(localStorage.getItem("puzzle"))||k(t)),h=Object(m.a)(O,2),S=h[0],w=h[1],N=700/parseInt(t),C=600/parseInt(t),T=S.map((function(e){return e.correctPosition})),P=function(e){for(var t=0;t<e.length;t++)if(t!==parseInt(e[t]))return!1;return!0}(T),E=localStorage.getItem("nickname")||null,F=localStorage.getItem("userId"),G=localStorage.getItem("puzzlePlayTime")||1,M=function(e){var t=[];S.map((function(n){return n.correctPosition===e.correctPosition?t.push(r):n.correctPosition===r.correctPosition?t.push(e):t.push(n)})),localStorage.setItem("puzzle",JSON.stringify(t)),w(t)},A=Object(c.useCallback)((function(){y(),e("/"),q.close()}),[e]),K=Object(c.useCallback)((function(){var e=k(parseInt(t));localStorage.removeItem("puzzle"),w(I(e)),g(1),q.close()}),[t]);Object(c.useEffect)((function(){return localStorage.setItem("puzzleLevel",t),w(k(t)),g(1),function(){y()}}),[t]),Object(c.useEffect)((function(){d&&q.fire({title:"<strong>This will cost you extra 10 seconds.</strong>",icon:!1,html:Object(B.jsx)("div",{className:"original-image-container",children:Object(B.jsx)("img",{src:localStorage.getItem("puzzleImage")||H,alt:"original"})}),showCloseButton:!0,showCancelButton:!1,customClass:"original-image",focusConfirm:!1,showConfirmButton:!1}).then((function(){b(!1)}))}),[d]);var Y=Object(c.useCallback)(Object(u.a)(i.a.mark((function e(){var n,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem("puzzleImage")||H,e.next=3,v(F,t,G,n);case 3:return e.next=5,z(F);case 5:c=e.sent,q.fire({title:"<strong>Game Finished!</strong>",icon:"success",html:Object(B.jsx)(J,{time:G,results:c,finishGame:A,restartGame:K}),showCloseButton:!1,showCancelButton:!1,focusConfirm:!1,showConfirmButton:!1,allowOutsideClick:!1});case 7:case"end":return e.stop()}}),e)}))),[F,A,t,K,G]);return Object(c.useEffect)((function(){P&&Y()}),[P,K,A,x,Y]),console.log(C,N,t),Object(B.jsxs)("div",{className:"container-fluid d-flex flex-column align-items-center pb-5",children:[Object(B.jsxs)("div",{className:"d-flex w-100 justify-content-between py-2",children:[E?Object(B.jsxs)("div",{className:"align-self-end",children:[Object(B.jsx)("img",{src:R,alt:"user",id:"user-logo",className:"rounded"}),Object(B.jsx)("span",{className:"mx-3 lead text-white",children:E})]}):null,P?null:Object(B.jsxs)("div",{className:"d-flex align-self-end",children:[Object(B.jsx)(D,{playTime:x,setPlayTime:g,order:T}),Object(B.jsx)(L,{text:"Original Picture",className:"start-button mx-2",onClickHandler:function(){b(!0),g((function(e){return e+10}))}})]})]}),Object(B.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(".concat(t,", ").concat(N,"px)"),gap:"10px",placeItems:"center"},children:S.map((function(e,n){return Object(B.jsx)(X,{index:e.correctPosition,updateBoxesOrder:M,part:e,level:t,width:N,height:C,pieceToShuffle:r,setPieceToShuffle:l},n)}))})]})},K=function(){return Object(B.jsx)("div",{children:Object(B.jsxs)(s.c,{children:[Object(B.jsx)(s.a,{path:"/",element:Object(B.jsx)(F,{})}),Object(B.jsx)(s.a,{path:"/:lvl",element:Object(B.jsx)(A,{})})]})})},Y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,67)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,l=t.getTTFB;n(e),c(e),a(e),r(e),l(e)}))},Q=n(34);l.a.render(Object(B.jsx)(a.a.StrictMode,{children:Object(B.jsx)(Q.a,{children:Object(B.jsx)(K,{})})}),document.getElementById("root")),Y()}},[[66,1,2]]]);
//# sourceMappingURL=main.2f7257a4.chunk.js.map