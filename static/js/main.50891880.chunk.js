(this["webpackJsonpimage-puzzle"]=this["webpackJsonpimage-puzzle"]||[]).push([[0],{51:function(e,t,c){},66:function(e,t,c){"use strict";c.r(t);var n=c(5),a=c.n(n),r=c(34),l=c.n(r),s=(c(51),c(9)),o=c(0),i=c.n(o),u=c(3),m=c(12),j=c(27),d=c.n(j),b=c(28),p=c.n(b),f=c(17),x=c(19),g=c(45);Object(g.a)({apiKey:"AIzaSyBsYKl7Qc3AfN7vDGX1Po3zucHj5Zo2Eu4",authDomain:"image-puzzle-2757b.firebaseapp.com",projectId:"image-puzzle-2757b",storageBucket:"image-puzzle-2757b.appspot.com",messagingSenderId:"130798020012",appId:"1:130798020012:web:0f71705ed9753bf25a4609"});var h=Object(x.e)(),O=function(){var e=Object(u.a)(i.a.mark((function e(t){var c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(x.a)(Object(x.b)(h,"users"),{nickname:t});case 3:return c=e.sent,e.abrupt("return",c.id);case 7:e.prev=7,e.t0=e.catch(0),console.error("Error adding document: ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(u.a)(i.a.mark((function e(t,c,n,a){var r,l,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=Object(x.c)(h,"users",t),e.next=4,Object(x.d)(r);case 4:return l=e.sent,s=l.data().results?[].concat(Object(f.a)(l.data().results),[{level:c,time:n,image:a}]):[{level:c,time:n,image:a}],e.next=8,Object(x.f)(r,{results:Object(f.a)(s)});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Error adding document: ",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,c,n,a){return e.apply(this,arguments)}}(),z=function(){var e=Object(u.a)(i.a.mark((function e(t){var c,n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=Object(x.c)(h,"users",t),e.next=4,Object(x.d)(n);case 4:return a=e.sent,e.abrupt("return",null===(c=a.data())||void 0===c?void 0:c.results);case 8:e.prev=8,e.t0=e.catch(0),console.error("Error adding document: ",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();function I(e){for(var t=e.length-1;t>0;t--){var c=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[c],e[c]=n}return e}var S=function(e,t,c){return 0!==c&&c%parseInt(t)!==0?e*(c%parseInt(t)):0},w=function(e,t,c){return c<3?0:Math.floor(c/parseInt(t))*e},N=function(e){for(var t=[],c=0;c<Math.pow(parseInt(e),2);c++)t.push({correctPosition:c});return I(t)};function k(e,t,c){var n=new Image;n.onload=t,n.onerror=c,n.src=e}var C=[{value:"3x3",text:"3X3"},{value:"4x4",text:"4X4"},{value:"6x6",text:"6X6"},{value:"8x8",text:"8X8"},{value:"12x12",text:"12X12"},{value:"16x16",text:"16X16"},{value:"20x20",text:"20X20"}],y=function(){localStorage.removeItem("puzzleLevel"),localStorage.removeItem("puzzlePlayTime"),localStorage.removeItem("puzzle"),localStorage.removeItem("puzzleImage")},T=c(35),P=c(46),B=c(6),L=function(e){var t=e.onClickHandler,c=e.text,n=Object(P.a)(e,["onClickHandler","text"]);return Object(B.jsx)("button",Object(T.a)(Object(T.a)({onClick:t},n),{},{children:c}))},E=p()(d.a),F=function(){var e=Object(n.useState)(""),t=Object(m.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(!1),l=Object(m.a)(r,2),o=l[0],j=l[1],d=Object(n.useState)(null),b=Object(m.a)(d,2),p=b[0],f=b[1],x=Object(n.useState)(localStorage.getItem("nickname")||""),g=Object(m.a)(x,2),h=g[0],v=g[1],z=Object(n.useState)(""),I=Object(m.a)(z,2),S=I[0],w=I[1],N=Object(s.f)(),T=function(){var e=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""===h){e.next=10;break}if(j(!0),localStorage.getItem("userId")&&h===localStorage.getItem("nickname")){e.next=9;break}return e.next=6,O(h);case 6:n=e.sent,localStorage.setItem("nickname",h),localStorage.setItem("userId",n);case 9:j(!1);case 10:""!==S&&k(S,(function(){localStorage.setItem("puzzleImage",S),N("/".concat(c))}),(function(){return f("Oops Image isn't valid!")})),localStorage.getItem("puzzleImage")||""!==S||N("/".concat(c));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=Object(n.useCallback)((function(){N("/".concat(localStorage.getItem("puzzleLevel"),"x").concat(localStorage.getItem("puzzleLevel"))),E.close()}),[N]),F=function(){y(),E.close()};return Object(n.useEffect)((function(){return localStorage.getItem("puzzleLevel")&&setTimeout((function(){return E.fire({title:"<strong>Welcome Back!</strong>",icon:"question",html:Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)("p",{children:"Do you wish to continue to your previous game?"}),Object(B.jsx)(L,{text:"Continue",className:"start-button mx-2",onClickHandler:P}),Object(B.jsx)(L,{text:"Start New",className:"start-button mx-2",onClickHandler:F})]}),showCloseButton:!1,showCancelButton:!1,focusConfirm:!1,showConfirmButton:!1})}),800),function(){f(null)}}),[P]),Object(B.jsx)("div",{className:"container-fluid min-vh-100 d-flex flex-column justify-content-center home",children:Object(B.jsx)("div",{className:"w-50 mx-auto",children:Object(B.jsxs)("div",{className:"d-flex flex-column align-items-center text-white puzzle-intro py-5",children:[Object(B.jsx)("p",{className:"display-5 text-light text-center pb-3 puzzle-title",children:"Image Puzzle"}),Object(B.jsx)("form",{onSubmit:T,className:"w-50",children:Object(B.jsxs)("div",{className:"d-flex flex-column align-items-center",children:[Object(B.jsxs)("div",{className:"w-100",children:[Object(B.jsx)("label",{htmlFor:"nickname",children:"Pick nickname"}),Object(B.jsx)("input",{type:"text",className:"form-control mb-3",value:h,id:"nickname",placeholder:"Very creative nickname",onChange:function(e){return v(e.target.value)}}),Object(B.jsx)("label",{htmlFor:"customImage",children:"Insert image URL"}),Object(B.jsx)("input",{type:"search",className:"form-control mb-3",value:S,id:"customImage",placeholder:"example.com/image.png",onChange:function(e){return w(e.target.value)}}),p&&Object(B.jsx)("p",{className:"text-dark fw-bold",children:p}),Object(B.jsx)("label",{htmlFor:"level",children:"Choose Level"}),Object(B.jsxs)("select",{className:"form-control mb-3",value:c,id:"level",required:!0,onChange:function(e){return a(e.target.value)},children:[Object(B.jsx)("option",{value:""}),C.map((function(e){return Object(B.jsx)("option",{value:e.value,children:e.text},e.value)}))]})]}),Object(B.jsx)(L,{text:"Start Game",className:"start-button mt-5 ".concat(o?"disabled":""),disabled:o})]})})]})})})},H=c(31),X=c.p+"static/media/house.1b8ad546.png",G=function(e){var t=e.part,c=e.updateBoxesOrder,n=e.pieceToShuffle,a=e.setPieceToShuffle,r=e.width,l=e.height,s=e.index,o=e.level,i={width:"".concat(r,"px"),height:"".concat(l,"px"),objectFit:"cover",backgroundImage:localStorage.getItem("puzzleImage")?"url(".concat(localStorage.getItem("puzzleImage"),")"):"url(".concat(X,")"),backgroundSize:"700px 600px",backgroundPosition:"-".concat(S(r,o,s),"px -").concat(w(l,o,s),"px"),float:"left",borderRadius:"4px"};return Object(B.jsx)("div",{className:"puzzle-piece piece-".concat(s),style:i,onClick:function(e){e.target.classList.toggle("focused"),n?(c(t),a(null)):a(t)}})},D=function(e){var t=e.playTime,c=e.setPlayTime,a=Object(n.useCallback)((function(){c((function(e){return e+1})),localStorage.setItem("puzzlePlayTime",t)}),[t,c]);return Object(n.useEffect)((function(){var e=setTimeout((function(){a()}),1e3);return function(){return clearTimeout(e)}}),[a]),Object(B.jsx)("span",{className:"d-flex align-items-center bg-secondary px-3 text-white rounded",children:t})},M=Object(n.memo)(D),J=function(e){var t=e.result;return Object(B.jsxs)("div",{className:"row justify-content-center pt-3",children:[Object(B.jsx)("div",{className:"col-lg-3 d-flex justify-content-center align-items-center",children:Object(B.jsx)("span",{children:t.level})}),Object(B.jsx)("div",{className:"col-lg-3 d-flex justify-content-center align-items-center",children:Object(B.jsx)("span",{children:t.time})}),Object(B.jsx)("div",{className:"col-lg-3",children:Object(B.jsx)("img",{src:t.image,className:"result-image",alt:"puzzle"})})]})},R=function(e){var t=e.time,c=e.results,n=e.finishGame,a=e.restartGame;return Object(B.jsxs)("div",{className:"overflow-hidden",children:[Object(B.jsxs)("p",{children:["Total Time ",t," seconds."]}),Object(B.jsx)("p",{className:"text-info",children:"Your Results"}),Object(B.jsxs)("div",{className:"row justify-content-center pb-2",children:[Object(B.jsx)("div",{className:"col-lg-3",children:"Level"}),Object(B.jsx)("div",{className:"col-lg-3",children:"Time"}),Object(B.jsx)("div",{className:"col-lg-3",children:"Image"}),c&&c.map((function(e,t){return Object(B.jsx)(J,{result:e},t)}))]}),Object(B.jsx)(L,{text:"Home",className:"start-button",onClickHandler:n}),Object(B.jsx)(L,{text:"Try again",className:"start-button mx-3",onClickHandler:a})]})},q=c.p+"static/media/user.274d479b.jpg",A=p()(d.a),K=function(){var e=Object(s.f)(),t=Object(s.g)().lvl.split("x")[0],c=Object(n.useState)(null),a=Object(m.a)(c,2),r=a[0],l=a[1],o=Object(n.useState)(!1),j=Object(m.a)(o,2),d=j[0],b=j[1],p=Object(n.useState)(parseInt(localStorage.getItem("puzzlePlayTime"))||1),f=Object(m.a)(p,2),x=f[0],g=f[1],h=Object(n.useState)(JSON.parse(localStorage.getItem("puzzle"))||N(t)),O=Object(m.a)(h,2),S=O[0],w=O[1],k=700/parseInt(t),C=600/parseInt(t),T=S.map((function(e){return e.correctPosition})),P=function(e){for(var t=0;t<e.length;t++)if(t!==parseInt(e[t]))return!1;return!0}(T),E=localStorage.getItem("nickname")||null,F=localStorage.getItem("userId"),D=localStorage.getItem("puzzlePlayTime")||1,J=function(e){var t=[];S.map((function(c){return c.correctPosition===e.correctPosition?t.push(r):c.correctPosition===r.correctPosition?t.push(e):t.push(c)})),localStorage.setItem("puzzle",JSON.stringify(t)),w(t)},K=Object(n.useCallback)((function(){y(),e("/"),A.close()}),[e]),Y=Object(n.useCallback)((function(){var e=N(parseInt(t));localStorage.removeItem("puzzle"),w(I(e)),g(1),A.close()}),[t]);Object(n.useEffect)((function(){return t!==localStorage.getItem("puzzleLevel")&&(localStorage.setItem("puzzleLevel",t),w(N(t)),g(1)),function(){y()}}),[t]),Object(n.useEffect)((function(){d&&A.fire({title:"<strong>This will cost you extra 10 seconds.</strong>",icon:!1,html:Object(B.jsx)("div",{className:"original-image-container",children:Object(B.jsx)("img",{src:localStorage.getItem("puzzleImage")||X,alt:"original"})}),showCloseButton:!0,showCancelButton:!1,customClass:"original-image",focusConfirm:!1,showConfirmButton:!1}).then((function(){b(!1)}))}),[d]);var Q=Object(n.useCallback)(Object(u.a)(i.a.mark((function e(){var c,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=localStorage.getItem("puzzleImage")||X,e.next=3,v(F,t,D,c);case 3:return e.next=5,z(F);case 5:n=e.sent,A.fire({title:"<strong>Game Finished!</strong>",icon:"success",html:Object(B.jsx)(R,{time:D,results:n,finishGame:K,restartGame:Y}),showCloseButton:!1,showCancelButton:!1,focusConfirm:!1,showConfirmButton:!1,allowOutsideClick:!1});case 7:case"end":return e.stop()}}),e)}))),[F,K,t,Y,D]);return Object(n.useEffect)((function(){P&&Q()}),[P,Y,K,x,Q]),console.log(C,k,t),Object(B.jsxs)("div",{className:"d-flex flex-column align-items-center pb-5",children:[Object(B.jsxs)("div",{className:"d-flex w-100 justify-content-between py-2 mb-3 rounded-bottom",children:[Object(B.jsx)("div",{className:"d-flex align-items-center",children:Object(B.jsx)(H.b,{className:"text-white btn btn-info shadow px-3 mx-3",to:"/",children:"Home"})}),P?null:Object(B.jsxs)("div",{className:"d-flex align-self-end",children:[Object(B.jsx)(M,{playTime:x,setPlayTime:g,order:T}),Object(B.jsx)(L,{text:"Original Picture",className:"start-button mx-2",onClickHandler:function(){b(!0),g((function(e){return e+10}))}})]}),E?Object(B.jsxs)("div",{children:[Object(B.jsx)("img",{src:q,alt:"user",id:"user-logo",className:"rounded"}),Object(B.jsx)("span",{className:"mx-3 lead text-white",children:E})]}):null]}),Object(B.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(".concat(t,", ").concat(k,"px)"),gap:"10px",placeItems:"center"},children:S.map((function(e,c){return Object(B.jsx)(G,{index:e.correctPosition,updateBoxesOrder:J,part:e,level:t,width:k,height:C,pieceToShuffle:r,setPieceToShuffle:l},c)}))})]})},Y=function(){return Object(B.jsx)("div",{children:Object(B.jsxs)(s.c,{children:[Object(B.jsx)(s.a,{path:"/",element:Object(B.jsx)(F,{})}),Object(B.jsx)(s.a,{path:"/:lvl",element:Object(B.jsx)(K,{})})]})})},Q=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,67)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,l=t.getTTFB;c(e),n(e),a(e),r(e),l(e)}))};l.a.render(Object(B.jsx)(a.a.StrictMode,{children:Object(B.jsx)(H.a,{children:Object(B.jsx)(Y,{})})}),document.getElementById("root")),Q()}},[[66,1,2]]]);
//# sourceMappingURL=main.50891880.chunk.js.map